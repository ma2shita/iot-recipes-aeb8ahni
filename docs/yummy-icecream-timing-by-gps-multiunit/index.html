
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>【IoT DIY レシピ】IoT でアイスの食べ時をお知らせ</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://soracom.github.io/iot-recipes/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-66865146-33"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="yummy-icecream-timing-by-gps-multiunit"
                  title="【IoT DIY レシピ】IoT でアイスの食べ時をお知らせ"
                  environment="web"
                  feedback-link="https://soracom.jp/products/kit/gps_multiunit/">
    
      <google-codelab-step label="IoT でアイスの食べ時をお知らせ" duration="1">
        <p>公開日: 2020年7月</p>
<p>レシピ難易度：★☆☆☆☆</p>
<p>アイスクリームの食べ方の一つに「とろけ食べ」という溶け始めを楽しむ方法があります。しかし、溶け始めを待っていると「忘れてしまうという問題」がありますが、本レシピは IoT によって溶け始めを感知し、確実に「溶け始めのアイスクリーム」を楽しめる方法を作ります。</p>
<p>溶かす方法ですが、今回は室温における常温解凍の具合をセンシングします。何度か試したところ、私のところではアイス底面にてセンサーの温度が 18.5℃～17.5℃ を下回ると下図のように周辺が溶けた状態になるため、中心部と混ぜ合わせる事で程よい溶け具合となります。</p>
<p class="image-container"><img style="width: 601.70px" src="img/3b189d1db9a27df3.png"></p>
<p>底面での温度が目標に達するまでには室温状況に左右するため、時間ではなく温度センサーにて計測し、目標に達したら下図のような通知を送る仕組みとなっています。</p>
<p class="image-container"><img style="width: 601.70px" src="img/4a51da9d898e303c.png"></p>
<p>本レシピに連動した動画も公開しています。</p>
<iframe class="youtube-video" src="https://www.youtube.com/embed/PImaaIFqEDc?rel=0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 is-upgraded>本レシピを行うのに必要な時間、概算費用</h2>
<p>本レシピは以下の通りです。</p>
<ul>
<li>必要な時間: 約1時間</li>
<li>概算費用: 約11,100円</li>
</ul>
<p>※ 概算費用: ハードウェアや SORACOM を始めとした各種サービスの概ねの費用 (税や送料などの付帯費用や無料枠適用は考慮しないものとしています)</p>
<h2 is-upgraded>このコンテンツの進め方</h2>
<p>ページの内容を読み、また作業を行ったら右下の［Next］を押して次のステップへ進みます。また、［Back］を使って戻ったり、左のナビゲーションメニューでもページの移動が可能です。</p>
<p>左上の［×］を押してコンテンツを終了することができます。また、ページを開きなおすことで再開できます。ページのアドレスはブラウザの［履歴］メニューを利用してください。</p>

<aside class="warning"><p>本コンテンツは現状のままで提供され、株式会社ソラコムは、誤りがないことの保証を含め、明示であると黙示であるとを問わず、本コンテンツの記載内容につき、いかなる種類の表明も保証も行いません。</p>
<p>掲載情報の閲覧及び利用により、利用者自身、もしくは第三者が被った損害に対して、直接的、間接的を問わず、株式会社ソラコムは責任を負いかねます。</p>
<p>本コンテンツを実践する中で用意された機器、利用されたサービスについてのご質問は、それぞれの機器やサービスの提供元にお問い合わせをお願いします。機器やサービスの仕様は、本コンテンツ作成当時のものです。</p>
<p>株式会社ソラコムが提供する機器・サービスについてのご質問は、 <a href="https://soracom.jp/contact/" target="_blank">https://soracom.jp/contact/</a> をご確認の上、適切な窓口へのお問い合わせをお願いします。機器・サービスご利用前の導入相談は <a href="https://soracom.jp/contact/contactsales/" target="_blank">https://soracom.jp/contact/contactsales/</a> に、機器・サービスご利用開始後のサポートは、SORACOMユーザーコンソール内の<a href="https://soracom.zendesk.com/hc/ja/requests/" target="_blank">サポートサイトから「リクエストを送信」</a>(要ログイン)にてお問い合わせください。</p>
<p>本ドキュメントは <a href="https://github.com/googlecodelabs/tools" target="_blank">CLaaT</a> を用いて制作しています</p>
<p>Copyright (c) 2020 SORACOM, INC.</p>
</aside>



      </google-codelab-step>
    
      <google-codelab-step label="準備" duration="1">
        <p>本レシピを行うためには以下のものをご用意ください。</p>
<h2 is-upgraded>ハードウェア</h2>
<table>
<tr><td colspan="1" rowspan="1"><p><strong>品名</strong></p>
</td><td colspan="1" rowspan="1"><p><strong>数量</strong></p>
</td><td colspan="1" rowspan="1"><p><strong>価格</strong></p>
</td><td colspan="1" rowspan="1"><p><strong>購入先</strong></p>
</td><td colspan="1" rowspan="1"><p><strong>備考</strong></p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>GPSマルチユニットSORACOM Edition（バッテリー内蔵タイプ）スターターキット</p>
</td><td colspan="1" rowspan="1"><p>1</p>
</td><td colspan="1" rowspan="1"><p>11,000円</p>
</td><td colspan="1" rowspan="1"><p><a href="https://soracom.jp/products/kit/gps_multiunit/" target="_blank">ソラコム</a></p>
</td><td colspan="1" rowspan="1"><p>キットの中には以下のものが含まれています。</p>
<ul>
<li>GPS マルチユニット SORACOM Edition 本体 x 1</li>
<li>SORACOM 特定地域向け IoT SIM (plan-D ナノサイズ) x 1</li>
<li>microUSB ケーブル x 1</li>
</ul>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>パソコン</p>
</td><td colspan="1" rowspan="1"><p>1</p>
</td><td colspan="1" rowspan="1"><p>―</p>
</td><td colspan="1" rowspan="1"><p>―</p>
</td><td colspan="1" rowspan="1"><ul>
<li>インターネット接続が可能でサイトへの接続が自由であること。</li>
<li>Google Chrome 等の最新ブラウザーが利用可能な事。</li>
</ul>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>(必要な方のみ)</p>
<p>USB 型 AC アダプタ</p>
</td><td colspan="1" rowspan="1"><p>―</p>
</td><td colspan="1" rowspan="1"><p>―</p>
</td><td colspan="1" rowspan="1"><p>―</p>
</td><td colspan="1" rowspan="1"><p>GPS マルチユニット SORACOM Edition の充電に利用します。パソコンからの給電でも代用可能です。</p>
</td></tr>
</table>
<p>※ 金額はレシピ作成時となります。ソラコムで販売している金額は税抜き・送料別です。</p>
<h2 is-upgraded>その他必要なもの</h2>
<table>
<tr><td colspan="1" rowspan="1"><p><strong>必要なもの</strong></p>
</td><td colspan="1" rowspan="1"><p><strong>費用</strong></p>
</td><td colspan="1" rowspan="1"><p><strong>作成方法など</strong></p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>SORACOM アカウント</p>
</td><td colspan="1" rowspan="1"><p>無料※</p>
</td><td colspan="1" rowspan="1"><p><a href="https://soracom.github.io/iot-recipes/create-account-soracom-jp/" target="_blank">SORACOM アカウントの作成 (JP)</a></p>
</td></tr>
</table>
<p>※ アカウント作成・維持の費用の料金です。</p>
<h2 is-upgraded>設置に利用したもの</h2>
<p>本レシピで設置時に利用した部材です。必須ではありませんがご参考にお使いください。</p>
<table>
<tr><td colspan="1" rowspan="1"><p><strong>品名</strong></p>
</td><td colspan="1" rowspan="1"><p><strong>数量</strong></p>
</td><td colspan="1" rowspan="1"><p><strong>備考</strong></p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>ティッシュ</p>
</td><td colspan="1" rowspan="1"><p>1</p>
</td><td colspan="1" rowspan="1"><p>1枚あれば十分です。GPS マルチユニット SORACOM Editionが濡れないようにするためのカバーとして使います。</p>
</td></tr>
</table>


      </google-codelab-step>
    
      <google-codelab-step label="GPS マルチユニットが届いたら" duration="5">
        <p>GPS マルチユニットは SIM を挿入することでセルラー通信(LTE-M)を通じて、クラウドと連携できるようになります。そのため、まず GPS マルチユニットに同梱されている SIM を SORACOM へ登録をしましょう。<br>※ すでに登録済み、もしくは登録済みの別の SIM を利用する場合は次へお進みください。</p>
<p>登録の方法は<a href="https://soracom.github.io/iot-recipes/register-ordering-sim-jp/" target="_blank">発注済みの SIM を登録する(JP)</a>をご覧ください。約5分で完了します。</p>
<p>登録が完了すると SIM 管理の一覧に表示されますので、確認ください。</p>
<p class="image-container"><img style="width: 602.00px" src="img/2da56bb5e1a17c28.png"></p>
<aside class="special"><p><strong>SORACOM の便利な使い方: SIM の「名前」機能</strong></p>
<p>SIM には「名前」を付けることができ、これで整理が可能です。特に複数の SIM (ボタン含む) をお持ちの際には、名前を付けることを強くお勧めいたします。</p>
<p>名前の付け方は <a href="https://dev.soracom.io/jp/start/console/#name_tag" target="_blank">SIM への名前の付け方</a>をご覧ください。</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="SIM を GPS マルチユニットに取り付ける" duration="5">
        <p>SORACOM 特定地域向け IoT SIM (以下 SIM) をカードから切り離し、GPS マルチユニットの側面に挿入します。</p>
<h2 is-upgraded>GPS マルチユニットの側面を開け、SIM トレイ (赤色) を取り出す。</h2>
<p>爪で引っ掛けるようにして取り出します。</p>
<p class="image-container"><img style="width: 602.00px" src="img/961f6484b7c60f7b.png"></p>
<h2 is-upgraded>SIM を SIM トレイに乗せる。</h2>
<p>SIM トレイに収まるように SIM を乗せます。SIM の方向に気をつけてください。また、<strong>SIM トレイは無くさないようにしてください。</strong></p>
<p class="image-container"><img style="width: 529.00px" src="img/de54657d5ea8fad2.png"></p>
<h2 is-upgraded>SIM トレイごと GPS マルチユニットに挿入する。</h2>
<p>元々入ってた向きで SIM トレイごと SIM を GPS マルチユニットに挿入します。このとき、SIM トレイから SIM が飛び出ないように気をつけてください。</p>
<p class="image-container"><img style="width: 468.00px" src="img/7d4693ac501d2a58.png"></p>
<p>最後に側面を閉じて終了です。</p>
<p class="image-container"><img style="width: 602.00px" src="img/5202d33a26a08ae5.png"></p>
<p>GPS マルチユニットに挿入した SIM の IMSI (クレジットカードサイズのカードの裏面に記載されている 15 桁の番号) を使用しますので、すぐ取り出せるようにしておいてください。</p>
<h3 is-upgraded>ここでの作業は動画 (約1分) でもご覧いただけます。</h3>
<iframe class="youtube-video" src="https://www.youtube.com/embed/OmOoXtNY4jQ?rel=0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


      </google-codelab-step>
    
      <google-codelab-step label="GPS マルチユニットの設定を行う" duration="10">
        <p>GPS マルチユニットの設定は SORACOM ユーザコンソール上で行います。</p>
<h2 is-upgraded><a href="https://console.soracom.io/" target="_blank">SORACOM ユーザーコンソール</a>にログインした後［Menu］&gt;［ガジェット管理］&gt;［GPS マルチユニット］とクリックします。</h2>
<p class="image-container"><img style="width: 547.00px" src="img/f3e006ed7b5caac7.png"></p>
<p>GPS マルチユニット管理画面が表示されます。ここには、GPS マルチユニットとして利用しているSIM一覧が表示されます。初めて利用する場合は「データが見つかりません」と表示されますが、正常です。</p>
<h2 is-upgraded>［新規デバイス設定］をクリックします。</h2>
<p class="image-container"><img style="width: 602.00px" src="img/5d15a7d482bda46.png"></p>
<h2 is-upgraded>GPS マルチユニットに挿入した SIM にチェックをつけてから［次へ：グループを選択］をクリックします。</h2>
<p>複数 SIM を持っている場合は IMSI で見つけ出すようにしてください。<br>※図では「名前」を登録してあるため、見つけやすくなっています。</p>
<p class="image-container"><img style="width: 602.00px" src="img/de64f1e37490ff0d.png"></p>
<h2 is-upgraded>&#34;新規グループを作成&#34; をクリックし、グループ名入力してから［次へ：設定を編集］をクリックします。</h2>
<p>グループ名は任意です。日本語も利用可能です。ここでは「<strong>GPSマルチユニット</strong>」としています。</p>
<p class="image-container"><img style="width: 465.00px" src="img/daad986a2fc914ed.png"></p>
<h2 is-upgraded>GPSマルチユニットの設定を行います。</h2>
<h3 is-upgraded>送信内容</h3>
<p>「温度」のみにチェックがついているようにします。(位置情報、湿度のチェックは外します)</p>
<p class="image-container"><img style="width: 255.00px" src="img/d5dbe7eec5336086.png"></p>
<h3 is-upgraded>送信先</h3>
<p>「SORACOM Harvest (Lagoon)」 にチェックをつけます。</p>
<p class="image-container"><img style="width: 329.00px" src="img/e7825c9869049a82.png"></p>
<h3 is-upgraded>送信モード</h3>
<p>「定期送信 ― 手動モード」にチェックをつけます。</p>
<p class="image-container"><img style="width: 602.00px" src="img/41d67e056ed1606c.png"></p>
<h3 is-upgraded>定期送信 ― 手動モード 詳細設定</h3>
<p>送信間隔を <code>1</code> と入力します。</p>
<p class="image-container"><img style="width: 476.00px" src="img/566fa56cce021dc1.png"></p>
<p>ここまで入力が完了したら、最後に［保存］をクリックします。</p>
<p>すると以下のダイアログが表示されるので［デバイス一覧に戻る］をクリックします。</p>
<p class="image-container"><img style="width: 602.00px" src="img/6e059a562464b11b.png"></p>
<p>GPS マルチユニット管理画面に戻りますが、先ほど設定した SIM が一覧に表示されていることが確認できます。</p>
<p class="image-container"><img style="width: 602.00px" src="img/25dfcf98d4b91319.png"></p>
<h3 is-upgraded>設定を GPS マルチユニット本体に反映させる。</h3>
<p>GPS マルチユニットのファンクションボタン（本体表面の四角のボタン）を1秒ほど押します。すると LED が緑色に点灯します。</p>
<p class="image-container"><img style="width: 602.00px" src="img/29a821786b385382.gif"></p>
<p>GPS マルチユニット本体から SORACOM に保存されている設定情報を取得して設定が反映されます。また、設定が反映された GPS マルチユニットは新たな設定で動き続けるようになります。</p>
<p>以上で GPS マルチユニットの設定は終了となります。</p>


      </google-codelab-step>
    
      <google-codelab-step label="SORACOM Harvest Data で設定の確認を行う" duration="5">
        <p>SORACOM Harvest Data を利用して、設定が正しく反映されているか確認します。</p>
<h2 is-upgraded>GPS マルチユニット管理画面で、先ほど設定したSIMにチェックを付けて［データを確認］をクリックします。</h2>
<p class="image-container"><img style="width: 602.00px" src="img/b9a7092f3482e4dc.png"></p>
<aside class="special"><p>SIM 管理画面からチェックをつけて［操作］&gt;［データを確認］でも同様のことができます。</p>
</aside>
<p>以下のようにグラフが確認できます。SORACOM Harvest Data の操作として、画面左側のグラフ種類を選んだり、画面中央の「自動更新」で自動的に新たなデータを表示できます。</p>
<p class="image-container"><img style="width: 601.70px" src="img/582020616aaa0433.png"></p>
<p>「temp(温度)」「rs(電波強度)」「bat(電池残量)」「type(送信モード)」の 4つの値が1分間隔で送信されていれば、設定成功です。</p>
<aside class="special"><p><strong>rs, bat, type について</strong></p>
<p>これらの値は必ず送信されてくるようになっています。値の意味については<a href="https://dev.soracom.io/jp/gps_multiunit/how-it-works/" target="_blank">GPS マルチユニット SORACOM Edition 機能の説明</a>をご覧ください。</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="SORACOM Lagoon でダッシュボードを作成する（有効化まで）" duration="10">
        <p>SORACOM Harvest Data に蓄積されたデータを SORACOM Lagoon で活用していきます。</p>
<h3 is-upgraded>SORACOM Lagoon 用語解説</h3>
<p>ここで SORACOM Lagoon で使われる用語を解説します。</p>
<table>
<tr><td colspan="1" rowspan="1"><p><strong>用語</strong></p>
</td><td colspan="1" rowspan="1"><p><strong>意味</strong></p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>プラン</p>
</td><td colspan="1" rowspan="1"><p>SORACOM Lagoon の契約プランです。機能と料金が異なります。<a href="https://soracom.jp/services/lagoon/price/" target="_blank">SORACOM Lagoon のご利用料金</a>に機能や料金の比較表があります。</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>メトリクス</p>
<p>(メトリック)</p>
</td><td colspan="1" rowspan="1"><p>データが格納されている先です。SORACOM Lagoon では以下の4つの中から選び、その中からノード(SIMや回線)を選択します。</p>
<ul>
<li>Air = SORACOM Air for セルラー</li>
<li>LoRa = SORACOM Air for LoRaWAN</li>
<li>Sigfox = SORACOM Air for Sigfox</li>
<li>Device = SORACOM Inventory デバイス</li>
</ul>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>データソース</p>
</td><td colspan="1" rowspan="1"><p>メトリクスの参照先です。SORACOM Lagoon では &#34;Harvest&#34; (= SORACOM Harvest) を選ぶとメトリクスが展開されます。 Grafana ではテスト用のランダムデータが表示されます。</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>パネル</p>
</td><td colspan="1" rowspan="1"><p>パネルはデータを表示する領域です。データソースとメトリクスを指定すると、そのメトリクス(たとえばSIM)のデータをパネルで使えるようになります。</p>
<p>様々なパネルが存在します。</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>ダッシュボード</p>
</td><td colspan="1" rowspan="1"><p>複数のパネルを束ねて「1枚の画面」にしたものがダッシュボードです。共有の単位となります。</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>SORACOM Lagoon ユーザー</p>
<p>(Lagoon ユーザー)</p>
</td><td colspan="1" rowspan="1"><p>SORACOM Lagoon へログインするためのユーザー(IDとパスワードの組)</p>
<p>SORACOM ユーザコンソールへのログインとは異なるユーザ一覧となり、皆さん自身で登録・削除が可能です。ダッシュボードやパネルを編集できる「編集可能」と表示専用の「読み取り」の2段階の権限を設定できます。</p>
<p>作成可能数はプランによります。</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>データリフレッシュ</p>
</td><td colspan="1" rowspan="1"><p>SORACOM Harvest から SORACOM Lagoon へデータが反映される事、もしくは反映タイミングとなります。反映タイミングはプランによります。</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>アラート</p>
</td><td colspan="1" rowspan="1"><p>メトリクスのデータに対して条件を設定し、その条件を満たしたら通知を行う仕組みの事です。</p>
</td></tr>
</table>
<h2 is-upgraded><a href="https://console.soracom.io/" target="_blank">SORACOM ユーザーコンソール</a>の［Menu］&gt;［データ収集・蓄積・可視化］&gt;［SORACOM Lagoon］とクリックします。</h2>
<p class="image-container"><img style="width: 547.00px" src="img/df078d78ef3c64c9.png"></p>
<h2 is-upgraded>［SORACOM Lagoon の利用を開始する］をクリックします。</h2>
<p class="image-container"><img style="width: 602.00px" src="img/4a10b1d6ed1f5cc0.png"></p>
<h2 is-upgraded>プランのうち［Free］を選択したあと［続行する］をクリックします。</h2>
<p class="image-container"><img style="width: 602.00px" src="img/748cdbb71537788c.png"></p>
<h2 is-upgraded>SORACOM Lagoon ユーザーの初期ユーザーに設定するパスワードを入力した後、［利用開始］をクリックします。</h2>
<p class="image-container"><img style="width: 602.00px" src="img/f2b324c51b7a071e.png"></p>
<aside class="special"><p><strong>SORACOM Lagoon ユーザーの初期ユーザの ID は？</strong></p>
<p>ID は SORACOM ユーザコンソールにログインしたときのメールアドレスが使われることになります。そのため、ここではパスワードのみ設定することになります。<strong>SORACOM ユーザコンソールへのログインとは異なるパスワードを設定する事を強くお勧めします。</strong></p>
</aside>
<aside class="warning"><p><strong>利用開始がクリックできない場合は？</strong></p>
<p>パスワードの条件が不足しています。全てに✔がつくようにパスワードを設定してください。</p>
</aside>
<p>SORACOM Lagoon の有効化に成功すると、以下のように SORACOM Lagoon コンソールへのリンクと、Lagoon ユーザーの一覧が管理できるようになります。</p>
<p>この画面を SORACOM Lagoon 管理画面と呼びます。</p>
<p class="image-container"><img style="width: 602.00px" src="img/6475480a56127f92.png"></p>
<p>SORACOM Lagoon 管理画面は、SORACOM Lagoon が有効化されている間は ［Menu］&gt;［データ収集・蓄積・可視化］&gt;［SORACOM Lagoon］で表示する事ができます。</p>


      </google-codelab-step>
    
      <google-codelab-step label="SORACOM Lagoon でダッシュボードを作成する（SORACOM Lagoon へのログインまで）" duration="5">
        <h2 is-upgraded>SORACOM Lagoon 管理画面を表示したあと、［SORACOM Lagoon console にアクセス］をクリックします。</h2>
<p>※ SORACOM Lagoon 管理画面は ［Menu］&gt;［データ収集・蓄積・可視化］&gt;［SORACOM Lagoon］で表示する事ができます。</p>
<p class="image-container"><img style="width: 602.00px" src="img/72eb738a70a79802.png"></p>
<h2 is-upgraded>SORACOM Lagoon へログインします。</h2>
<p>メールアドレス (SORACOM ユーザコンソールへログインする際のメールアドレス) と、SORACOM Lagoon 初期ユーザ作成時に利用したパスワードでログインします。</p>
<p class="image-container"><img style="width: 602.00px" src="img/d442ea101d6ae875.png"></p>
<p>ログインに成功すると、以下のような画面が表示されます。これが SORACOM Lagoon ログイン直後の画面です。ここから「ダッシュボード」や「パネル」を作成していきます。</p>
<p class="image-container"><img style="width: 838.50px" src="img/1b5745e822b81074.png"></p>
<aside class="special"><p><strong>背景を白くしたい</strong></p>
<p>SORACOM Lagoon の標準では背景が黒となっています。これは設定で変更が可能です。</p>
<p>右下のアイコンにカーソルを合わせて表示される［設定］をクリックします。</p>
<p class="image-container"><img style="width: 342.00px" src="img/8cec8a9120d25dcd.png"></p>
<p>設定画面に &#34;テーマ&#34; を &#34;Light&#34; に変更して［保存］すると、背景が白くなります。</p>
<p class="image-container"><img style="width: 502.00px" src="img/69d5628454a7662a.png"></p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="SORACOM Lagoon でダッシュボードを作成する（アラートの作成まで）" duration="5">
        <p>通知先を設定します。</p>
<h2 is-upgraded>アラートアイコン<img style="width: 52.00px" src="img/929c5a290c1b2b20.png">にカーソルを乗せると表示される「アラート」メニューから［通知チャンネル］をクリックします。</h2>
<p class="image-container"><img style="width: 300.00px" src="img/7f2e92ac97094e6d.png"></p>
<h2 is-upgraded>［チャンネルを作成］をクリックします。</h2>
<p class="image-container"><img style="width: 552.00px" src="img/d51a4a26dfc3e897.png"></p>
<h2 is-upgraded>「Alerting」では以下の通りに入力します。</h2>
<table>
<tr><td colspan="1" rowspan="1"><p><strong>項目</strong></p>
</td><td colspan="1" rowspan="1"><p><strong>内容</strong></p>
</td><td colspan="1" rowspan="1"><p><strong>備考</strong></p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>名前</p>
</td><td colspan="1" rowspan="1"><p><code>email</code></p>
</td><td colspan="1" rowspan="1"><p>任意の名称で構いません。</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>タイプ</p>
</td><td colspan="1" rowspan="1"><p>Email</p>
</td><td colspan="1" rowspan="1"><p>―</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Email addresses</p>
</td><td colspan="1" rowspan="1"><p>通知の送付先メールアドレス</p>
</td><td colspan="1" rowspan="1"><p>; で複数指定が可能です。</p>
</td></tr>
</table>
<p class="image-container"><img style="width: 380.00px" src="img/76acb94532757b86.png"></p>
<p>入力し終わったら［保存］をクリックします。</p>
<aside class="special"><p><strong>［送信テスト］について</strong></p>
<p>保存の前に［送信テスト］にてテストが行えます。テストを行うと以下のようなメールが届きますので、確認にご利用ください。</p>
<p>また、メールが届かない場合の確認ポイントは以下の通りです。</p>
<ul>
<li>メールアドレスが正しいこと</li>
<li><code>no-reply@soracom.jp</code> からのメールが迷惑メールに判定されてないこと、もしくは受信フィルタで拒否されていないこと</li>
</ul>
<p class="image-container"><img style="width: 587.00px" src="img/48b63cb9a997e1d.png"></p>
</aside>
<h3 is-upgraded>以下のように表示されていれば成功です。</h3>
<p class="image-container"><img style="width: 601.70px" src="img/75d9f2d124017aad.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="SORACOM Lagoon でダッシュボードを作成する（ダッシュボードのインポートまで）" duration="5">
        <p>あらかじめ設定が済んでいるテンプレートを使ってダッシュボードを作成します。</p>
<h2 is-upgraded>ダッシュボードアイコン<img style="width: 41.00px" src="img/1a2fb10a70407aa4.png">にカーソルを乗せると表示される「ダッシュボード」メニューから［管理］をクリックします。</h2>
<p class="image-container"><img style="width: 322.00px" src="img/f480623e992e3b37.png"></p>
<h2 is-upgraded>［Import］をクリックします。</h2>
<p class="image-container"><img style="width: 601.70px" src="img/e3f1768fea3b586f.png"></p>
<h2 is-upgraded>［Or paste JSON］のテキストボックスへ、以下のテキストを入力(貼り付け)ます。</h2>
<p class="image-container"><img style="width: 586.00px" src="img/56ed93bec45e1f86.png"></p>
<p>貼り付けたら［Load］をクリックします。</p>
<h3 is-upgraded>貼り付けるテキスト (JSON)</h3>
<pre>{
  &#34;annotations&#34;: {
    &#34;list&#34;: [
      {
        &#34;builtIn&#34;: 1,
        &#34;datasource&#34;: &#34;-- Grafana --&#34;,
        &#34;enable&#34;: true,
        &#34;hide&#34;: true,
        &#34;iconColor&#34;: &#34;rgba(0, 211, 255, 1)&#34;,
        &#34;name&#34;: &#34;Annotations &amp; Alerts&#34;,
        &#34;type&#34;: &#34;dashboard&#34;
      }
    ]
  },
  &#34;editable&#34;: true,
  &#34;gnetId&#34;: null,
  &#34;graphTooltip&#34;: 0,
  &#34;id&#34;: 2050,
  &#34;links&#34;: [],
  &#34;panels&#34;: [
    {
      &#34;alert&#34;: {
        &#34;conditions&#34;: [
          {
            &#34;evaluator&#34;: {
              &#34;params&#34;: [
                17.5
              ],
              &#34;type&#34;: &#34;lt&#34;
            },
            &#34;operator&#34;: {
              &#34;type&#34;: &#34;and&#34;
            },
            &#34;query&#34;: {
              &#34;params&#34;: [
                &#34;A&#34;,
                &#34;5m&#34;,
                &#34;now&#34;
              ]
            },
            &#34;reducer&#34;: {
              &#34;params&#34;: [],
              &#34;type&#34;: &#34;last&#34;
            },
            &#34;type&#34;: &#34;query&#34;
          }
        ],
        &#34;executionErrorState&#34;: &#34;alerting&#34;,
        &#34;frequency&#34;: &#34;60s&#34;,
        &#34;handler&#34;: 1,
        &#34;message&#34;: &#34;アイスが食べごろかもしれません！&#34;,
        &#34;name&#34;: &#34;Panel Title alert&#34;,
        &#34;noDataState&#34;: &#34;no_data&#34;,
        &#34;notifications&#34;: [
          {
            &#34;id&#34;: 747
          }
        ]
      },
      &#34;aliasColors&#34;: {},
      &#34;bars&#34;: false,
      &#34;dashLength&#34;: 10,
      &#34;dashes&#34;: false,
      &#34;datasource&#34;: null,
      &#34;fill&#34;: 1,
      &#34;gridPos&#34;: {
        &#34;h&#34;: 12,
        &#34;w&#34;: 24,
        &#34;x&#34;: 0,
        &#34;y&#34;: 0
      },
      &#34;id&#34;: 2,
      &#34;legend&#34;: {
        &#34;avg&#34;: false,
        &#34;current&#34;: false,
        &#34;max&#34;: false,
        &#34;min&#34;: false,
        &#34;show&#34;: true,
        &#34;total&#34;: false,
        &#34;values&#34;: false
      },
      &#34;lines&#34;: true,
      &#34;linewidth&#34;: 1,
      &#34;links&#34;: [],
      &#34;nullPointMode&#34;: &#34;null&#34;,
      &#34;percentage&#34;: false,
      &#34;pointradius&#34;: 5,
      &#34;points&#34;: false,
      &#34;renderer&#34;: &#34;flot&#34;,
      &#34;seriesOverrides&#34;: [],
      &#34;spaceLength&#34;: 10,
      &#34;stack&#34;: false,
      &#34;steppedLine&#34;: false,
      &#34;targets&#34;: [
      ],
      &#34;thresholds&#34;: [
        {
          &#34;colorMode&#34;: &#34;critical&#34;,
          &#34;fill&#34;: true,
          &#34;line&#34;: true,
          &#34;op&#34;: &#34;lt&#34;,
          &#34;value&#34;: 17.5
        }
      ],
      &#34;timeFrom&#34;: null,
      &#34;timeShift&#34;: null,
      &#34;title&#34;: &#34;底面温度&#34;,
      &#34;tooltip&#34;: {
        &#34;shared&#34;: true,
        &#34;sort&#34;: 0,
        &#34;value_type&#34;: &#34;individual&#34;
      },
      &#34;type&#34;: &#34;graph&#34;,
      &#34;xaxis&#34;: {
        &#34;buckets&#34;: null,
        &#34;mode&#34;: &#34;time&#34;,
        &#34;name&#34;: null,
        &#34;show&#34;: true,
        &#34;values&#34;: []
      },
      &#34;yaxes&#34;: [
        {
          &#34;format&#34;: &#34;short&#34;,
          &#34;label&#34;: null,
          &#34;logBase&#34;: 1,
          &#34;max&#34;: null,
          &#34;min&#34;: null,
          &#34;show&#34;: true
        },
        {
          &#34;format&#34;: &#34;short&#34;,
          &#34;label&#34;: null,
          &#34;logBase&#34;: 1,
          &#34;max&#34;: null,
          &#34;min&#34;: null,
          &#34;show&#34;: true
        }
      ],
      &#34;yaxis&#34;: {
        &#34;align&#34;: false,
        &#34;alignLevel&#34;: null
      }
    }
  ],
  &#34;refresh&#34;: &#34;1m&#34;,
  &#34;schemaVersion&#34;: 16,
  &#34;style&#34;: &#34;light&#34;,
  &#34;tags&#34;: [],
  &#34;templating&#34;: {
    &#34;list&#34;: []
  },
  &#34;time&#34;: {
    &#34;from&#34;: &#34;now-15m&#34;,
    &#34;to&#34;: &#34;now&#34;
  },
  &#34;timepicker&#34;: {
    &#34;refresh_intervals&#34;: [
      &#34;1m&#34;,
      &#34;5m&#34;,
      &#34;15m&#34;,
      &#34;30m&#34;,
      &#34;1h&#34;,
      &#34;2h&#34;,
      &#34;1d&#34;
    ],
    &#34;time_options&#34;: [
      &#34;5m&#34;,
      &#34;15m&#34;,
      &#34;1h&#34;,
      &#34;6h&#34;,
      &#34;12h&#34;,
      &#34;24h&#34;,
      &#34;2d&#34;,
      &#34;7d&#34;,
      &#34;30d&#34;
    ]
  },
  &#34;timezone&#34;: &#34;&#34;,
  &#34;title&#34;: &#34;アイスクリームの食べごろ&#34;
}</pre>
<aside class="warning"><p><strong>Load をクリックすると &#34;Unexpected end of JSON input&#34; と表示される</strong></p>
<p>テキストが上手く入力できていない場合は<img style="width: 338.00px" src="img/c98e8561cb2ab941.png">と表示されます。</p>
<p>貼り付けたテキストを見直すようにしてください。</p>
</aside>
<h2 is-upgraded>Options では以下のようになっていることを確認します。</h2>
<table>
<tr><td colspan="1" rowspan="1"><p><strong>項目</strong></p>
</td><td colspan="1" rowspan="1"><p><strong>内容</strong></p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Name</p>
</td><td colspan="1" rowspan="1"><p>アイスクリームの食べごろ</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>フォルダ</p>
</td><td colspan="1" rowspan="1"><p>General</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Unique Identifier (uid)</p>
</td><td colspan="1" rowspan="1"><p>auto generated</p>
</td></tr>
</table>
<p class="image-container"><img style="width: 601.70px" src="img/bf7a2cfe68e93537.png"></p>
<p>確認できたら［Import］をクリックします。</p>
<h3 is-upgraded>以下のように表示されていれば成功です。</h3>
<p class="image-container"><img style="width: 601.70px" src="img/2490ad6a2865c351.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="SORACOM Lagoon でダッシュボードを作成する（パネルの編集まで）" duration="5">
        <h2 is-upgraded>&#34;底面温度&#34; &gt;［編集］をクリックします。</h2>
<p class="image-container"><img style="width: 602.00px" src="img/bd8cd10d40c361ad.png"></p>
<h2 is-upgraded>&#34;メトリック&#34; タブでノード(= SIM) をクリックし、GPS マルチユニットに紐づいている SIM を選びます。</h2>
<p>データソースを &#34;default&#34; にした後、［クエリを追加］をクリックします。</p>
<p class="image-container"><img style="width: 364.00px" src="img/a36a86a072bf8258.png"></p>
<p>メトリクスは &#34;Air&#34; になっているので、あとはノード(= SIM) で GPS マルチユニット SORACOM Edition に取り付けた SIM を選択します。</p>
<p class="image-container"><img style="width: 602.00px" src="img/21939b6890dfe6bb.png"></p>
<p>選んだ時点で、全データが表示されます。</p>
<aside class="special"><p><strong>データが表示されていない？</strong></p>
<p>データを蓄積し始めてから間もない場合、グラフの右端に「少しだけ」表示されている場合があります。これは、パネルの表示時間の標準が「過去6時間分」を表示するようになっているからです。</p>
<p class="image-container"><img style="width: 771.33px" src="img/5b0eb2c6e78099d1.png"></p>
<p>右上の「時間」ボタンで表示範囲を設定可能です。まずは「過去15分間」くらいが良いでしょう。</p>
<p class="image-container"><img style="width: 587.00px" src="img/76a64d941a095f3.png"></p>
<p>それでもデータが表示されていない場合は、いったん SORACOM Harvest Data データの蓄積具合を確認するようにしてください。</p>
</aside>
<h2 is-upgraded>表示データを &#34;temp&#34; のみにします。</h2>
<p>データの項目リストをクリックして &#34;temp&#34; をクリックします。</p>
<p class="image-container"><img style="width: 602.00px" src="img/32a3d51790c803f6.png"></p>
<p>選ぶと、即時グラフに反映されます。</p>
<h2 is-upgraded>&#34;アラート&#34; タブをクリックした後［通知］をクリックします。</h2>
<p class="image-container"><img style="width: 601.70px" src="img/b3a00046cd7aed69.png"></p>
<aside class="special"><p><strong>通知温度を変更したい場合は？</strong></p>
<p>&#34;アラート&#34; の「条件」で変更します。今回テンプレートとして設定しているのは17.5 ℃を下回ったらアラート発動としています。そのため  <code>IS BELOW 17.5</code> となっている部分を変更することで条件が変えられます。</p>
</aside>
<h2 is-upgraded>［送り先］の<img style="width: 38.00px" src="img/38ead9633ff579b.png">をクリックし、先ほど作成した通知先 (例に沿っているなら email)を選択します。</h2>
<p class="image-container"><img style="width: 461.00px" src="img/432d5f0a811d29d9.png"></p>
<p class="image-container"><img style="width: 458.00px" src="img/30c69893a62bb125.png"></p>
<p>以上で全ての設定が終了です。</p>


      </google-codelab-step>
    
      <google-codelab-step label="SORACOM Lagoon でダッシュボードを作成する（ダッシュボードの保存）" duration="3">
        <h2 is-upgraded>画面右上のダッシュボードに戻る<img style="width: 54.00px" src="img/2c69286f16fd7716.png">ボタンをクリックします。</h2>
<p class="image-container"><img style="width: 493.00px" src="img/9196ca6f166013da.png"></p>
<h3 is-upgraded>画面右上の<img style="width: 26.00px" src="img/50a8bb4168fb4b7d.png">をクリックすることでこれまでの作業を保存できます。</h3>
<h3 is-upgraded><img style="width: 601.70px" src="img/389492df4f299b03.png"></h3>
<p>［保存］で保存します。</p>
<p class="image-container"><img style="width: 531.00px" src="img/234397285cc0bde9.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="アイスクリームの底面温度を計測する" duration="15">
        <p>準備が整いましたので、実際にアイスクリームの底面温度を計測します。</p>
<aside class="warning"><p><strong>計測前の注意点</strong></p>
<p>計測に当たっては以下の点についてご注意ください。</p>
<ul>
<li>GPS マルチユニット SORACOM Edition は防水ではありません。そのため「<strong>アイスクリーム容器の表面を拭いておく</strong>」そして「<strong>ティッシュペーパー等をかぶせて濡れないようにする</strong>」ことです。ただし、あまり厚手のモノをかぶせると温度計測ができなくなるため、そこも注意が必要です。</li>
<li>溶かしすぎないように初回は必ず様子を見てください。</li>
</ul>
</aside>
<p>緑色の枠が温湿度センサーの窓になっています。ここにアイスクリームの底面が当たるように乗せる事になります。</p>
<p class="image-container"><img style="width: 601.70px" src="img/c163a5b2b7795da2.png"></p>
<p>水分対策としてティッシュペーパーで覆いました。</p>
<p class="image-container"><img style="width: 601.70px" src="img/ebf964b33c472836.png"></p>
<p>以下が実際にアイスクリームを乗せている様子です。今回利用したアイスクリームは小さめという事もあり、縁を回避するような形で底面がセンサー部に密着できるようずらしています。</p>
<p class="image-container"><img style="width: 601.70px" src="img/2f375863c95f76c9.png"></p>
<h2 is-upgraded>SORACOM Lagoon で可視化＆通知</h2>
<p>実際の様子を見てみます。以下のように乗せた後から温度が下がり始めている様子が可視化されます。</p>
<p class="image-container"><img style="width: 601.70px" src="img/f48180db28fe35ea.png"></p>
<p>また、設定温度である 17.5 ℃ を下回ると画面上でもアラートを見ることができます。</p>
<p class="image-container"><img style="width: 601.70px" src="img/e22f72a0d4860cec.png"></p>
<p>この時メールにも以下のように届いていることが確認できます。</p>
<p class="image-container"><img style="width: 601.70px" src="img/4a51da9d898e303c.png"></p>
<p>私の環境では以下のように食べごろとなりました。</p>
<p class="image-container"><img style="width: 601.70px" src="img/3b189d1db9a27df3.png"></p>
<aside class="special"><p><strong>温度について</strong></p>
<p>今回のレシピでは「マカダミアナッツ」「グリーンティー」「リッチミルク」「キャラメルホリック」の4種類で試しましたが、概ね 18℃～17℃ の間となりましたが、種類によっては異なる場合があります。また外気温や好みの問題もありますので、高めの温度 (= 下降曲線の初めの方) に条件を設定するのも検討ください。</p>
<p class="image-container"><img style="width: 587.00px" src="img/831f91bd571b1274.png"></p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="あとかたづけと注意事項" duration="1">
        <p>本レシピでは費用がかかるサービスを利用しています。<br>本項をよく読み、必要な操作や解除作業を行うようにして、想定外の費用が掛からないようにしてください。</p>
<h2 is-upgraded>費用について</h2>
<p>ここで記載している金額は全て税別、送料別となります。</p>
<h3 is-upgraded>SORACOM プラットフォームの利用料金</h3>
<table>
<tr><td colspan="1" rowspan="1"><p><strong>サービス／機能</strong></p>
</td><td colspan="1" rowspan="1"><p><strong>料金</strong></p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p><a href="https://soracom.jp/services/air/cellular/price_specific_area_sim/" target="_blank">SORACOM Air (plan-D)</a></p>
</td><td colspan="1" rowspan="1"><ul>
<li>基本料: 10円/日</li>
<li>通信料: 0.2円~/MB</li>
</ul>
<p>(今回の利用であれば 1MB 以内で収まる範囲)</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p><a href="https://soracom.jp/services/harvest/price/" target="_blank">SORACOM Harvest Data</a></p>
</td><td colspan="1" rowspan="1"><ul>
<li>本機能を有効にしたグループに所属する1SIMあたり5円/日 (2000リクエスト/日/SIMを含む)</li>
<li>2000リクエスト/日を超えた分は0.004円/リクエスト</li>
</ul>
</td></tr>
<tr><td colspan="1" rowspan="1"><p><a href="https://soracom.jp/services/lagoon/price/" target="_blank">SORACOM Lagoon</a></p>
</td><td colspan="1" rowspan="1"><p>今回は Free プラン(無料)を使用しました。</p>
</td></tr>
</table>
<p>※ 費用詳細はリンク先をご確認ください。</p>
<aside class="special"><p><strong>無料利用枠について</strong></p>
<p>SORACOM サービスでは一部サービスにおいて無料枠が設定されています。たとえば SORACOM Air for セルラーであればアカウント毎で30円/月の通信分や、SORACOM Harvest Data であれば31日分の書込みリクエストなどです。料金詳細に「無料利用枠」として掲載されていますので、ご確認ください。</p>
</aside>
<h2 is-upgraded>グループ解除</h2>
<p>SORACOM Harvest Data 等、「機能が有効になっているグループに所属している SIM × 費用」となっているサービスにおいては、「機能を OFF にする」することで費用の発生を抑えることができます。またもう1つの方法として「グループに所属している SIM の数を減らす(= 解除する)」事でも費用を抑える事ができます。</p>
<p>グループ解除の方法は<a href="https://soracom.github.io/iot-recipes/unjoin-from-group/" target="_blank">グループからの解除 (JP)</a>をご覧ください。</p>
<h2 is-upgraded>SORACOM Harvest Data のデータ削除</h2>
<p>SORACOM Harvest Data は基本的にはデータ保管料は無料※です。そのため、保存しておいても害はありませんが、デモ等で利用する際にはデータを綺麗にしておく必要が出てくるため、データ削除について解説します。</p>
<p>※発生から40日を超えたデータは削除されます。40日以上データを保管したい場合は<a href="https://soracom.jp/services/harvest/price/" target="_blank">データ保持期間延長オプション利用料金</a>をご利用ください。</p>
<p>SORACOM Harvest Data 画面 (［操作］&gt;［データを確認］) のデータテーブルで、削除したいデータのチェックボックスを付けた後に［削除］をクリックします。表示されたダイアログで改めて［削除］をクリックすると、削除されます。<br>※ 複数のデータにチェックをつければ一括で削除可能です。</p>
<p class="image-container"><img style="width: 414.00px" src="img/637cac3bf206c47c.png"></p>
<p><strong>データの復元はできません</strong>のでご注意ください。</p>
<h2 is-upgraded>SORACOM Lagoon の解約</h2>
<p>SORACOM Lagoon はオンラインで解約が可能です。 Free プランであれば有効化しておいても費用は発生しませんが、長期に渡って利用しない場合には解約も選択いただけます。</p>
<p>解約の方法は<a href="https://soracom.github.io/iot-recipes/disable-soracom-lagoon" target="_blank">SORACOM Lagoon の解約(JP)</a>をご覧ください。</p>


      </google-codelab-step>
    
      <google-codelab-step label="次のステップ" duration="1">
        <p>本レシピでは、センサーや電源の事を考えなくとも利用可能なデバイスで、「簡単に現場のデジタル化」を実現しました。SORACOM Lagoon を活用すれば、アプリケーション開発の手間も減らすことができるため、「IoT の全体像を知りたい」といった方にも向いているかと思います。</p>
<p><a href="https://soracom.jp/products/kit/gps_multiunit/" target="_blank">商品ページへ戻る</a></p>
<p>よくあるご質問は<a href="https://sorazine.soracom.jp/entry/2020/03/13/march-webinar-report" target="_blank">Let&#39;s try IoT プロトタイピング ～ 健康管理や肌の乾燥を防ぐ仕組みを作ろう 〜 動画とQAのご紹介</a>でご案内しています。こちらもご覧ください。</p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://soracom.github.io/iot-recipes/codelab-elements/native-shim.js"></script>
  <script src="https://soracom.github.io/iot-recipes/codelab-elements/custom-elements.min.js"></script>
  <script src="https://soracom.github.io/iot-recipes/codelab-elements/prettify.js"></script>
  <script src="https://soracom.github.io/iot-recipes/codelab-elements/codelab-elements.js"></script>

</body>
</html>
